<div class="container">
    <!-- Sidebar -->
    <aside class="sidebar">
      <ul>
        <li
          [class.active]="activeOption === 1"
          (click)="selectOption(1)"
        >
          CompEval
        </li>
        <li
          [class.active]="activeOption === 2"
          (click)="selectOption(2)"
        >
          History
        </li>
      </ul>
    </aside>
  
    <!-- Main Content -->
    <main class="content">
      <!-- CompEval Section -->
      <div *ngIf="activeOption === 1">
        <h1>Welcome to CompEval <span *ngIf="username">, {{ username }}</span> </h1>
        <button class="upload-btn" (click)="triggerFileUpload(fileInput)">Upload Compliance Statement (PDF Only)</button>
        <input
          #fileInput
          type="file"
          accept="application/pdf"
          (change)="onFileSelected($event)"
          style="display: none"
        />
        <!-- Error message -->
        <div *ngIf="errorMessage" class="error-message">
          {{ errorMessage }}
        </div>

        <!-- File name and Evaluate button -->
        <div *ngIf="selectedFileName" class="file-info">
          <p>Selected file: {{ selectedFileName }}</p>
          <button class="upload-btn" (click)="evaluateFile()">Evaluate</button>
        </div>
      </div>
  
      <!-- History Section -->
      <div *ngIf="activeOption === 2">
        <!-- Display 'History' if username exists -->
        <ng-container *ngIf="username; else guestView">
          <h2 class="history-text">History</h2>
        </ng-container>
      
        <!-- Guest view if no username -->
        <ng-template #guestView>
          <h1>You need to be logged in to see the history of your past evaluations!</h1>
          <div class="auth-buttons">
            <button class="auth-btn" (click)="login()">Log In</button>
            <button class="auth-btn" (click)="signup()">Sign Up</button>
          </div>
        </ng-template>
      </div>
    </main>
  
    <!-- Top Right Menu -->
    <div class="top-right-menu">
      <div class="circle" (click)="toggleMenu()">â˜°</div>
      <div class="dropdown" *ngIf="isDropdownVisible">
        <!-- If username is available, show a greeting and logout button -->
        <ng-container *ngIf="username; else guestMenu">
          <p class="dropdown-greeting">Hi, {{ username }}</p>
          <button class="dropdown-btn" (click)="logout()">Log Out</button>
        </ng-container>
        <!-- If no username, show login and signup options -->
        <ng-template #guestMenu>
          <button class="dropdown-btn" (click)="login()">Log In</button>
          <button class="dropdown-btn" (click)="signup()">Sign Up</button>
        </ng-template>
      </div>
    </div>
  </div>
  